# 백엔드 포트 변경 가이드 (Port 8000 -> 8001)

`localhost:8000` 포트가 알 수 없는 프로세스에 의해 점유되어 있거나 충돌이 발생할 때, 백엔드 포트를 **8001**번으로 변경하여 문제를 회피할 수 있습니다.

---

## 1. `docker-compose.yml` 수정

`docker-compose.yml` 파일에서 **두 군데**를 수정해야 합니다.

### **Step 1: 백엔드 외부 포트 변경**
`backend` 서비스의 `ports` 설정을 `8001:8000`으로 변경합니다.
(왼쪽이 외부 접근 포트, 오른쪽이 컨테이너 내부 포트입니다. 오른쪽은 8000 그대로 두세요.)

```yaml
  backend:
    # ... 기존 설정들 ...
    ports:
      - "8001:8000"  # <- 여기를 수정 (기존 "8000:8000")
```

### **Step 2: 프론트엔드 환경변수 변경**
`frontend` 서비스가 백엔드를 찾을 주소를 **8001**로 변경합니다.

```yaml
  frontend:
    # ... 기존 설정들 ...
    environment:
      NEXT_PUBLIC_API_URL: http://localhost:8001  # <- 여기를 수정 (기존 8000)
      # ...
```

---

## 2. 변경 사항 적용 (Restart)

설정을 변경했다면, 컨테이너를 재생성해야 적용됩니다. 터미널에서 아래 명령어를 실행하세요.

```powershell
# 1. 기존 컨테이너 중지 및 삭제
docker-compose down

# 2. 변경된 설정으로 재빌드 및 실행
docker-compose up -d --build
```

---

## 3. 확인 방법

1.  **백엔드 접속 테스트**: 브라우저에서 `http://localhost:8001/docs` 접속 시 Swagger UI가 떠야 합니다.
2.  **웹 사이트 접속**: `http://localhost:3000` 접속 후 로그인이나 채팅을 시도했을 때, 네트워크 탭의 요청 주소가 `http://localhost:8001/...`로 나가는지 확인하세요.

---

## 💡 주의사항 (Important)
*   **파일 내 하드코딩 확인**: 만약 `frontend` 코드나 `.env` 파일 내에 `http://localhost:8000`이라고 직접 적은 부분이 있다면, 모두 `8001`로 찾아 바꾸기 해야 합니다. (현재 Docker Compose 설정 기준으로는 위 두 가지만 바꾸면 됩니다.)
*   **내부 통신**: `frontend`가 서버 사이드 렌더링(Server Component)에서 백엔드를 호출할 때는 `http://backend:8000`을 그대로 사용합니다. 도커 **내부** 포트는 `8000`으로 유지했기 때문입니다. (이 부분은 수정할 필요 없습니다.)
